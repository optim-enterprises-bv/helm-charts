{{- if .Values.databunker.enabled }}
{{/*
Secret for the Databunker PII vault.

DATABUNKER_MASTERKEY — 32-byte hex AES master key.  Loss = permanent data loss.
DATABUNKER_ROOTTOKEN — UUID root API token used by optimacs-ui.

Both values are required when databunker.enabled=true.
*/}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "optimacs.databunker.secretName" . }}
  labels:
    {{- include "optimacs.databunker.labels" . | nindent 4 }}
type: Opaque
stringData:
  DATABUNKER_MASTERKEY: {{ required "databunker.masterKey is required when databunker.enabled=true (generate: openssl rand -hex 32)" .Values.databunker.masterKey | quote }}
  DATABUNKER_ROOTTOKEN: {{ required "databunker.rootToken is required when databunker.enabled=true (generate: python3 -c \"import uuid; print(uuid.uuid4())\")" .Values.databunker.rootToken | quote }}
{{- end }}
